<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Волонтёры — Вход</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    .auth-box{max-width:420px;margin:40px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
    .auth-box input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #e5e7eb}
    .auth-actions{display:flex;gap:8px}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container">
      <div class="brand"><h1 class="title">Волонтёры</h1></div>
      <nav class="nav"><a href="index.html" class="nav-btn">Главная</a></nav>
    </div>
  </header>
  <main>
    <div class="auth-box" id="auth-box">
      <h2 id="auth-title">Вход для волонтёров</h2>
      <input id="email" placeholder="Электронная почта" />
      <input id="password" type="password" placeholder="Пароль" />
      <hr />
      <label>Регистрация — дополнительные данные (если регистрируетесь)</label>
      <input id="full-name" placeholder="ФИО" />
      <input id="iin" placeholder="ИИН (только для записи в профиль)" />
      <input id="vol-phone" placeholder="Телефон для контакта" />
      <input id="vol-city" placeholder="Город" />
      <div class="auth-actions">
        <button id="login" class="kaspi-btn">Войти</button>
        <button id="register" class="nav-btn">Регистрация</button>
      </div>
      <div style="margin-top:10px;font-size:0.9rem;color:#666">Прототип: данные хранятся в браузере (localStorage). Не используйте реальные пароли.</div>
    </div>

    <div class="auth-box" id="volunteer-panel" style="display:none;">
      <h2>Панель волонтёра</h2>
      <p>Добро пожаловать, <span id="volunteer-email"></span></p>
      <div id="volunteer-profile" style="font-size:0.95rem;color:#333;margin-bottom:8px"></div>
      <button id="logout" class="nav-btn">Выйти</button>
      <h3>Действия</h3>
      <div>
        <button id="refresh-apps" class="kaspi-btn">Обновить список заявок</button>
        <button id="export-csv" class="nav-btn">Экспорт CSV</button>
      </div>
      <div style="margin-top:12px;">
        <label>Фильтр по статусу: <select id="filter-status"><option value="all">Все</option><option value="new">Новые</option><option value="in_progress">В работе</option><option value="done">Выполнено</option></select></label>
      </div>
      <div style="margin-top:12px;">
        <table id="apps-table" style="width:100%;border-collapse:collapse">
          <thead><tr><th style="text-align:left">Имя</th><th>Город</th><th>Адрес</th><th>Контакт</th><th>Описание</th><th>Статус</th><th>Действия</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div style="margin-top:18px;">
        <h3>Карта организаций и заявок</h3>
        <div id="volunteer-map" style="height:420px;border-radius:12px;overflow:hidden;border:1px solid #e5e7eb"></div>
      </div>
    </div>
  </main>
  <!-- Leaflet and map script (provides volunteerMapAPI) -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>
  <!-- Supabase (optional): to enable, set window.SUPABASE_CONFIG in SUPABASE_SETUP.md instructions -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
  <script>
    // Paste your Supabase connection here or create window.SUPABASE_CONFIG in the browser console
    // Example in console: window.SUPABASE_CONFIG = { url: 'https://xxx.supabase.co', anonKey: 'public-anon-key' };
    window.SUPABASE_CONFIG = window.SUPABASE_CONFIG || {};
  </script>
  <script src="supabase.js"></script>
  <script src="volunteer.js"></script>
</body>
</html>
